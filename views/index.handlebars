<!DOCTYPE html>
<html>
<head>
  <title>My Agenda</title>
  <!-- no zooming on mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <!-- Bootstrap -->
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/bootstrap-theme.min.css" rel="stylesheet">
  <link href="/css/agenda.css" rel="stylesheet">
  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/fonts.css" rel="stylesheet">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
      <![endif]-->
</head>
<body>
  <!-- this is a comment in HTML -->
  <div class="container">
    <!-- h1 through h6 are headers. The higher the number, the smaller the header -->
    <!-- p means paragraph -->
   
    {{#if user_id}}
    
    {{>navbar}}

    <h3 class="page-header">Hi, {{username}}! Check out your agenda below</h3>
    <span class="type-title">my checklist</span>
    <!-- <a id="task-box-button" class="collapse-button">collapse</a> -->
    <div id="task-box">
      {{#each tasks}}
      <div class="todo-card subtask" id="task{{_id}}">
        <span class="due_date">{{dueDate}}</span>
        <span class="subtask-wrapper" id="{{_id}}"><input class="subtask-checkbox" type="checkbox" id="subtask-checkbox{{_id}}"><span class="subtask-name" id="subtask-name{{_id}}">{{name}}</span></span><br/>
        <a class="detail-button">details &raquo;</a>
        <p class="duration">time to complete: {{duration}} hours</p>
        <div id="detailtask{{_id}}" class="notes-field" style="display:none;">
          <a class="link-button" id="/projects/{{project_id}}/{{parent_id}}">View full task &raquo;</a>
          <span class="notes-title">part of task</span>
          <p class="notes-text">{{parent_name}}
            <!--<a class="task-button" id="{{project_id}}/tasks/{{parent}}">View task &raquo;</a>-->
          </p>
          <span class="notes-title">project</span>
          <p class="notes-text">{{project_name}}</p>
          {{#if notes}}
          <span class="notes-title">notes</span>
          <p class="notes-text">{{notes}}</p>
          {{/if}}
        </div>
      </div>
      {{else}}
        <div class="empty_info">
          <h5>Wahoo! No tasks to work on. Check out your projects page to see if there's anything you missed</h5>
          <button type="button" class="btn btn-lg btn-primary" id="/projects">Go To Projects</button>
        </div>
      {{/each}}
    </div>

    <br>
    
    <span class="type-title">my meetings</span>
    <!-- <a id="meeting-box-button" class="collapse-button">collapse</a> -->
    <div id="meeting-box">
      {{#each meetings}}
      <div class="todo-card meeting" id="meeting{{_id}}">
        <p class="meeting-name">{{name}}</p>
        <span class="duedate">{{datetime}}</span>
        <a class="detail-button">details &raquo;</a>
        <div id="detailmeeting{{_id}}" class="notes-field" style="display:none;">
          <a class="link-button" id="/projects/{{project_id}}">View project &raquo;</a>
          <span class="notes-title">project</span>
          <p class="notes-text">{{project_name}}</p>
          <span class="notes-title">attendees</span>
          <p class="notes-text">{{members}}</p>
          {{#if notes}}
          <span class="notes-title">notes</span>
          <p class="notes-text">{{notes}}</p>
          {{/if}}
        </div>
      </div>
      {{else}}
        <div class="empty_info">
          <h5>No upcoming meetings! Check out your Projects Page to see if there's anything you should schedule</h5>
          <button type="button" class="btn btn-lg btn-primary" id="/projects">Go To Projects</button>
        </div>
      {{/each}}
    </div>

    <br>
    <span class="type-title">completed</span>
    <a id="completed-box-button" class="collapse-button">hide</a>
    <div id="completed-box">
      {{#each completed_tasks}}
      <div class="todo-card completed" id="task{{_id}}">
        <span class="due_date">{{dueDate}}</span>
        <span class="subtask-wrapper" id="{{_id}}"><input class="subtask-checkbox" type="checkbox" id="subtask-checkbox{{_id}}" checked><span class="subtask-name" id="subtask-name{{_id}}" style="text-decoration: line-through;">{{name}}</span></span><br/>
        <a class="detail-button">details &raquo;</a>
        <p class="duration">time to complete: {{duration}} hours</p>
        <div id="detailtask{{_id}}" class="notes-field" style="display:none;">
          <a class="link-button" id="/projects/{{project_id}}/{{parent_id}}">View full task &raquo;</a>
          <span class="notes-title">part of task</span>
          <p class="notes-text">{{parent_name}}
            <!--<a class="task-button" id="{{project_id}}/tasks/{{parent}}">View task &raquo;</a>-->
          </p>
          <span class="notes-title">project</span>
          <p class="notes-text">{{project_name}}></p>
          {{#if notes}}
          <span class="notes-title">notes</span>
          <p class="notes-text">{{notes}}</p>
          {{/if}}
        </div>
      </div>
      {{/each}}
      {{#each meetings}}
      {{#unless datetime}}
      <div class="todo-card meeting" id="meeting{{_id}}">
        <p class="meeting-name">{{name}}</p>
        <span class="duedate">{{datetime}}</span>
        <a class="detail-button">details &raquo;</a>
        <div id="detailmeeting{{_id}}" class="notes-field" style="display:none;">
          <a class="link-button" id="/projects/{{project_id}}">View project &raquo;</a>
          <span class="notes-title">project</span>
          <p class="notes-text">{{project_name}}</p>
          <span class="notes-title">attendees</span>
          <p class="notes-text">{{members}}</p>
          {{#if notes}}
          <span class="notes-title">notes</span>
          <p class="notes-text">{{notes}}</p>
          {{/if}}
        </div>
      </div>
      {{/unless}}
      {{/each}}
    </div>

    {{else}}

    <div class="jumbotron" style="margin-top:20px;">
      <h1>Our Time App</h1>
      <p>by Mark, John, and Tyler</p>
    </div> 

    <div id="sign_in_page">
      <p>id is "john" and password is "1234"</p>
      <form class="form-horizontal" role="form" method="post" action="/login">
        <div class="form-group">
          <label for="inputEmail3" class="col-sm-2 control-label">Username</label>
          <div class="col-sm-10">
            <input name="username" type="text" class="form-control" id="inputEmail3" placeholder="Username">
          </div>
        </div>
        <div class="form-group">
          <label for="inputPassword3" class="col-sm-2 control-label">Password</label>
          <div class="col-sm-10">
            <input name="password" type="password" class="form-control" id="inputPassword3" placeholder="Password">
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-default">Sign in</button>
          </div>
        </div>
      </form>
      <p>New user? <a id="sign-up-button">Click here</a> to sign up</p>
    </div>

    <div id="sign_up_page" style="display:none;">
      <form class="form-horizontal" role="form" method="post" action="/create_user">   
        <div class="form-group">
          <label for="inputName" class="col-sm-2 control-label">Full Name</label>
          <div class="col-sm-10">
            <input name="fullname" type="text" class="form-control" id="inputEmail3" placeholder="Full Name" required>
          </div>
        </div>
        <div class="form-group">
          <label for="inputEmail3" class="col-sm-2 control-label">Username</label>
          <div class="col-sm-10">
            <input name="username" type="text" class="form-control" id="inputEmail3" placeholder="Username" required>
          </div>
        </div>
        <div class="form-group">
          <label for="inputPassword3" class="col-sm-2 control-label">Password</label>
          <div class="col-sm-10">
            <input name="password" type="password" class="form-control" id="inputPassword3" placeholder="Password" required> 
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-default">Create</button>
          </div>
        </div>
      </form>
      <p><a id="sign-in-button">Click here</a> to log in</p>
    </div>
    {{/if}}
  </div>
  
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <!--<script src="https://code.jquery.com/jquery.js"></script>-->
  <script src="/js/jquery.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/agenda.js"></script>

</body>
</html>
